---
import Layout from '../layouts/Layout.astro';
const base = import.meta.env.BASE_URL;
---

<Layout
  title="Kontakt – Kreuzer Trockenbau & Malerbetrieb"
  description="Kontaktieren Sie Kreuzer Trockenbau & Malerbetrieb in Haibühl. Telefon, E-Mail und Anfahrt."
>
  <!-- Page Header — Graphic / No Photo -->
  <section class="relative min-h-[50vh] sm:min-h-[55vh] flex items-end overflow-hidden bg-dark-950">
    <!-- Animated gradient orbs -->
    <div class="absolute inset-0 overflow-hidden">
      <div
        class="kontakt-orb absolute w-[500px] h-[500px] rounded-full bg-accent-500/[0.07] blur-[120px] top-[-10%] left-[-5%]"
      >
      </div>
      <div
        class="kontakt-orb absolute w-[400px] h-[400px] rounded-full bg-accent-500/[0.04] blur-[100px] bottom-[0%] right-[-5%]"
        style="animation-delay: -3s;"
      >
      </div>
      <div
        class="kontakt-orb absolute w-[300px] h-[300px] rounded-full bg-white/[0.02] blur-[80px] top-[20%] right-[20%]"
        style="animation-delay: -6s;"
      >
      </div>
    </div>
    <!-- Subtle grid pattern -->
    <div
      class="absolute inset-0 opacity-[0.03]"
      style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 60px 60px;"
    >
    </div>
    <!-- Bottom fade -->
    <div class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-dark-950 to-transparent"></div>

    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 sm:pb-16 pt-36 w-full text-center">
      <span class="text-accent-500 text-sm font-medium uppercase tracking-widest fade-in">Wir sind für Sie da</span>
      <h1 class="text-4xl sm:text-5xl lg:text-6xl font-light text-white mt-4 mb-5 fade-in font-heading tracking-tight">
        Sprechen Sie uns an
      </h1>
      <div class="h-0.5 w-16 bg-accent-500 rounded-full mx-auto mb-6 fade-in"></div>
      <p class="text-dark-400 text-lg max-w-2xl mx-auto fade-in leading-relaxed">
        Rufen Sie uns an, schreiben Sie eine E-Mail oder besuchen Sie uns persönlich — wir freuen uns auf Ihre Anfrage.
      </p>
    </div>
  </section>

  <style>
    @keyframes kontakt-float {
      0%,
      100% {
        transform: translate(0, 0) scale(1);
      }
      33% {
        transform: translate(30px, -20px) scale(1.05);
      }
      66% {
        transform: translate(-20px, 15px) scale(0.95);
      }
    }
    .kontakt-orb {
      animation: kontakt-float 12s ease-in-out infinite;
    }
  </style>

  <!-- Wizard Section — First thing after hero -->
  <section class="py-20 sm:py-28 lg:py-32 bg-dark-950">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Wizard + Map Side by Side -->
      <div id="wiz-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-8 transition-all duration-700">
        <!-- Anfrage-Wizard — Premium Card -->
        <div id="wiz-wrapper" class="fade-in-left transition-all duration-700">
          <div class="wiz-card relative rounded-3xl overflow-hidden">
            <!-- Animated gradient border -->
            <div class="wiz-border-glow absolute inset-0 rounded-3xl pointer-events-none"></div>
            <!-- Inner content -->
            <div class="relative bg-dark-900/80 backdrop-blur-sm rounded-3xl p-6 sm:p-8">
              <!-- Header -->
              <div class="mb-7">
                <div class="flex items-center gap-3 mb-3">
                  <div class="wiz-icon-pulse w-10 h-10 rounded-xl bg-accent-500/15 flex items-center justify-center">
                    <svg
                      class="w-5 h-5 text-accent-500"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      stroke-width="1.5"
                      ><path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.455 2.456L21.75 6l-1.036.259a3.375 3.375 0 00-2.455 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"
                      ></path></svg
                    >
                  </div>
                  <div>
                    <h2 class="text-xl sm:text-2xl font-bold text-white font-heading">Kostenlose Anfrage</h2>
                    <p class="text-dark-400 text-xs sm:text-sm">In 30 Sekunden — unverbindlich & kostenfrei</p>
                  </div>
                </div>
                <!-- Progress Bar -->
                <div class="relative h-1 bg-white/[0.06] rounded-full overflow-hidden">
                  <div
                    id="wiz-progress"
                    class="absolute left-0 top-0 h-full bg-gradient-to-r from-accent-500 to-accent-400 rounded-full transition-all duration-700 ease-out"
                    style="width: 25%"
                  >
                  </div>
                </div>
                <div class="flex justify-between mt-2">
                  <span id="wiz-step-label" class="text-accent-500 text-xs font-semibold">Schritt 1 von 4</span>
                  <span id="wiz-step-title" class="text-dark-500 text-xs">Leistung wählen</span>
                </div>
              </div>

              <form id="contact-form" class="relative" style="min-height: 260px;">
                <!-- Web3Forms -->
                <input type="hidden" name="access_key" value="e3b02111-91ad-440e-80f7-cae1f05299be" />
                <input type="hidden" name="subject" value="Neue Anfrage über kreuzer-trockenbau.de" />
                <input type="hidden" name="from_name" value="Kreuzer Trockenbau Website" />
                <input type="checkbox" name="botcheck" class="hidden" style="display:none" />
                <input type="hidden" name="leistung" id="wiz-leistung" />
                <input type="hidden" name="projektart" id="wiz-projektart" />
                <input type="hidden" name="projektgroesse" id="wiz-groesse" />
                <input type="hidden" name="zeitrahmen" id="wiz-zeit" />

                <!-- Step 1: Leistung -->
                <div class="wiz-panel" data-wiz-step="1">
                  <p class="text-white text-sm mb-5 font-medium">Was dürfen wir für Sie tun?</p>
                  <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                    <button
                      type="button"
                      class="wiz-option group"
                      data-field="leistung"
                      data-value="Trockenbau"
                      style="animation-delay: 0.05s"
                    >
                      <div class="wiz-option-icon">
                        <svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"
                          ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M2.25 12l8.954-8.955a1.126 1.126 0 011.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"
                          ></path></svg
                        >
                      </div>
                      <span class="wiz-option-label">Trockenbau</span>
                    </button>
                    <button
                      type="button"
                      class="wiz-option group"
                      data-field="leistung"
                      data-value="Malerarbeiten"
                      style="animation-delay: 0.1s"
                    >
                      <div class="wiz-option-icon">
                        <svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"
                          ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.994 15.994 0 011.622-3.395m3.42 3.42a15.995 15.995 0 004.764-4.648l3.876-5.814a1.151 1.151 0 00-1.597-1.597L14.146 6.32a15.996 15.996 0 00-4.649 4.763m3.42 3.42a6.776 6.776 0 00-3.42-3.42"
                          ></path></svg
                        >
                      </div>
                      <span class="wiz-option-label">Maler</span>
                    </button>
                    <button
                      type="button"
                      class="wiz-option group"
                      data-field="leistung"
                      data-value="Bäderrenovierung"
                      style="animation-delay: 0.15s"
                    >
                      <div class="wiz-option-icon">
                        <svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"
                          ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
                          ></path></svg
                        >
                      </div>
                      <span class="wiz-option-label">Bäder</span>
                    </button>
                    <button
                      type="button"
                      class="wiz-option group"
                      data-field="leistung"
                      data-value="Bodenbeläge"
                      style="animation-delay: 0.2s"
                    >
                      <div class="wiz-option-icon">
                        <svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"
                          ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zm0 9.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zm9.75-9.75A2.25 2.25 0 0115.75 3.75H18a2.25 2.25 0 012.25 2.25v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zm0 9.75a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 15.75V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"
                          ></path></svg
                        >
                      </div>
                      <span class="wiz-option-label">Böden</span>
                    </button>
                    <button
                      type="button"
                      class="wiz-option group"
                      data-field="leistung"
                      data-value="Fassade"
                      style="animation-delay: 0.25s"
                    >
                      <div class="wiz-option-icon">
                        <svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"
                          ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"
                          ></path></svg
                        >
                      </div>
                      <span class="wiz-option-label">Fassade</span>
                    </button>
                    <button
                      type="button"
                      class="wiz-option group"
                      data-field="leistung"
                      data-value="Sonstiges"
                      style="animation-delay: 0.3s"
                    >
                      <div class="wiz-option-icon">
                        <svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"
                          ><path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                          ></path></svg
                        >
                      </div>
                      <span class="wiz-option-label">Sonstiges</span>
                    </button>
                  </div>
                </div>

                <!-- Step 2: Projektart + Größe -->
                <div class="wiz-panel hidden" data-wiz-step="2">
                  <p class="text-white text-sm mb-4 font-medium">Um was für ein Projekt geht es?</p>
                  <div class="grid grid-cols-3 gap-3 mb-6">
                    <button type="button" class="wiz-chip" data-field="projektart" data-value="Neubau">
                      <svg
                        class="w-5 h-5 mx-auto mb-1.5 opacity-50"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                        ><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg
                      >
                      Neubau
                    </button>
                    <button type="button" class="wiz-chip" data-field="projektart" data-value="Renovierung">
                      <svg
                        class="w-5 h-5 mx-auto mb-1.5 opacity-50"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                        ><path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182"
                        ></path></svg
                      >
                      Renovierung
                    </button>
                    <button type="button" class="wiz-chip" data-field="projektart" data-value="Sanierung">
                      <svg
                        class="w-5 h-5 mx-auto mb-1.5 opacity-50"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                        ><path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M11.42 15.17l-5.1-5.1a2.12 2.12 0 113-3l5.1 5.1m0 0l5.1 5.1a2.12 2.12 0 01-3 3l-5.1-5.1z"
                        ></path></svg
                      >
                      Sanierung
                    </button>
                  </div>
                  <p id="wiz-groesse-label" class="text-white text-sm mb-4 font-medium">Wie groß ist das Vorhaben?</p>
                  <div id="wiz-groesse-grid" class="grid grid-cols-3 gap-3">
                    <button type="button" class="wiz-chip" data-field="groesse" data-value="Klein (1-2 Räume)"
                      >1–2 Räume</button
                    >
                    <button type="button" class="wiz-chip" data-field="groesse" data-value="Mittel (Wohnung)"
                      >Wohnung</button
                    >
                    <button type="button" class="wiz-chip" data-field="groesse" data-value="Groß (Haus/Gewerbe)"
                      >Haus / Gewerbe</button
                    >
                  </div>
                  <div class="flex items-center justify-between mt-6">
                    <button type="button" class="wiz-back">
                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
                        ><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"
                        ></path></svg
                      >
                      Zurück
                    </button>
                    <button type="button" class="wiz-next" disabled>
                      Weiter
                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
                        ><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg
                      >
                    </button>
                  </div>
                </div>

                <!-- Step 3: Zeitrahmen -->
                <div class="wiz-panel hidden" data-wiz-step="3">
                  <p class="text-white text-sm mb-5 font-medium">Wann soll es losgehen?</p>
                  <div class="grid grid-cols-2 gap-3">
                    <button
                      type="button"
                      class="wiz-chip wiz-chip-lg"
                      data-field="zeit"
                      data-value="So bald wie möglich"
                    >
                      <svg
                        class="w-5 h-5 mb-1 opacity-50"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                        ><path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"></path></svg
                      >
                      So bald wie möglich
                    </button>
                    <button type="button" class="wiz-chip wiz-chip-lg" data-field="zeit" data-value="In 1-3 Monaten">
                      <svg
                        class="w-5 h-5 mb-1 opacity-50"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                        ><path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"
                        ></path></svg
                      >
                      In 1–3 Monaten
                    </button>
                    <button type="button" class="wiz-chip wiz-chip-lg" data-field="zeit" data-value="In 3-6 Monaten">
                      <svg
                        class="w-5 h-5 mb-1 opacity-50"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                        ><path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg
                      >
                      In 3–6 Monaten
                    </button>
                    <button
                      type="button"
                      class="wiz-chip wiz-chip-lg"
                      data-field="zeit"
                      data-value="Nur Beratung gewünscht"
                    >
                      <svg
                        class="w-5 h-5 mb-1 opacity-50"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                        ><path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"
                        ></path></svg
                      >
                      Nur Beratung
                    </button>
                  </div>
                  <div class="flex items-center justify-between mt-6">
                    <button type="button" class="wiz-back">
                      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
                        ><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"
                        ></path></svg
                      >
                      Zurück
                    </button>
                  </div>
                </div>

                <!-- Step 4: Kontaktdaten -->
                <div class="wiz-panel hidden" data-wiz-step="4">
                  <p class="text-white text-sm mb-4 font-medium">Fast geschafft — wie erreichen wir Sie?</p>
                  <div class="space-y-4">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                      <div>
                        <label for="name" class="block text-dark-400 text-xs mb-1.5">Name *</label>
                        <input
                          type="text"
                          id="name"
                          name="name"
                          required
                          class="w-full px-4 py-3 rounded-xl bg-dark-800/50 border border-white/10 text-white placeholder-dark-500 text-sm focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/25 transition-colors"
                          placeholder="Ihr Name"
                        />
                      </div>
                      <div>
                        <label for="phone" class="block text-dark-400 text-xs mb-1.5">Telefon *</label>
                        <input
                          type="tel"
                          id="phone"
                          name="phone"
                          required
                          class="w-full px-4 py-3 rounded-xl bg-dark-800/50 border border-white/10 text-white placeholder-dark-500 text-sm focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/25 transition-colors"
                          placeholder="Ihre Telefonnummer"
                        />
                      </div>
                    </div>
                    <div>
                      <label for="email" class="block text-dark-400 text-xs mb-1.5">E-Mail *</label>
                      <input
                        type="email"
                        id="email"
                        name="email"
                        required
                        class="w-full px-4 py-3 rounded-xl bg-dark-800/50 border border-white/10 text-white placeholder-dark-500 text-sm focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/25 transition-colors"
                        placeholder="ihre@email.de"
                      />
                    </div>
                    <div>
                      <label for="message" class="block text-dark-400 text-xs mb-1.5"
                        >Nachricht <span class="text-dark-500">(optional)</span></label
                      >
                      <textarea
                        id="message"
                        name="message"
                        rows="3"
                        class="w-full px-4 py-3 rounded-xl bg-dark-800/50 border border-white/10 text-white placeholder-dark-500 text-sm focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/25 transition-colors resize-none"
                        placeholder="Weitere Details zu Ihrem Projekt..."></textarea>
                    </div>
                    <p class="text-dark-500 text-xs leading-relaxed">
                      Mit dem Absenden stimmen Sie unserer <a
                        href={`${base}/datenschutz`}
                        class="text-accent-500/70 hover:text-accent-400 transition-colors underline"
                        >Datenschutzerklärung</a
                      > zu.
                    </p>
                    <div class="flex items-center justify-between">
                      <button type="button" class="wiz-back">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
                          ><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"
                          ></path></svg
                        >
                        Zurück
                      </button>
                      <button
                        type="submit"
                        id="wiz-submit"
                        class="px-8 py-3.5 bg-accent-500 hover:bg-accent-400 text-dark-950 rounded-xl font-semibold transition-all duration-300 hover:shadow-lg hover:shadow-accent-500/25 hover:-translate-y-0.5 text-sm"
                      >
                        Anfrage absenden
                      </button>
                    </div>
                    <p id="form-status" class="text-sm hidden"></p>
                  </div>
                </div>

                <!-- Success Screen -->
                <div class="wiz-panel hidden" data-wiz-step="5">
                  <div class="text-center py-6">
                    <div
                      class="wiz-success-check w-20 h-20 rounded-full bg-green-500/10 border-2 border-green-500/30 flex items-center justify-center mx-auto mb-6"
                    >
                      <svg
                        class="w-10 h-10 text-green-400"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="2"
                        ><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5"></path></svg
                      >
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-3 font-heading">Anfrage gesendet!</h3>
                    <p class="text-dark-400 text-sm leading-relaxed max-w-sm mx-auto mb-4">
                      Vielen Dank! Wir melden uns innerhalb von 24 Stunden bei Ihnen.
                    </p>
                    <div
                      class="inline-flex items-center gap-2 text-xs text-dark-500 bg-dark-800/50 px-4 py-2 rounded-full"
                    >
                      <svg
                        class="w-4 h-4 text-green-400"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="2"
                        ><path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg
                      >
                      Kostenlos & unverbindlich
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>

        <!-- Google Maps Embed -->
        <div id="wiz-map" class="fade-in-right transition-all duration-700">
          <h2 class="text-2xl font-bold text-white mb-2 font-heading">Standort</h2>
          <p class="text-dark-400 text-sm mb-6">Haibühl, Gemeinde Arrach im Bayerischen Wald.</p>

          <div
            class="rounded-2xl overflow-hidden border border-white/5 h-[300px] sm:h-[350px] lg:aspect-auto lg:h-full lg:min-h-[400px] relative"
          >
            <iframe
              src="https://www.openstreetmap.org/export/embed.html?bbox=12.98%2C49.18%2C13.02%2C49.20&layer=mapnik&marker=49.19%2C13.00"
              width="100%"
              height="100%"
              style="border:0;"
              loading="lazy"
              title="Standort Kreuzer Trockenbau in Haibühl / Arrach"></iframe>
            <div class="absolute bottom-3 right-3">
              <a
                href="https://www.google.de/maps/place/Tannenweg+2,+93474+Arrach"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-dark-950/80 backdrop-blur-sm text-white/80 hover:text-accent-500 rounded-lg text-xs font-medium transition-colors border border-white/10"
              >
                <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
                  ></path>
                </svg>
                Google Maps
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Info Cards -->
  <section class="py-20 sm:py-28 lg:py-32 bg-dark-950">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
        <!-- Phone Card -->
        <div
          class="fade-in p-6 sm:p-8 rounded-2xl bg-dark-800/30 border border-white/[0.03] hover:border-white/[0.06] transition-all duration-700 group"
        >
          <div
            class="w-12 h-12 rounded-xl bg-accent-500/10 flex items-center justify-center mb-5 group-hover:bg-accent-500/20 transition-colors"
          >
            <svg
              class="w-6 h-6 text-accent-500"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"
              ></path>
            </svg>
          </div>
          <h3 class="text-white font-semibold mb-3 font-heading">Telefon</h3>
          <div class="space-y-1">
            <div>
              <a
                href="tel:+4909943905270"
                class="text-dark-300 hover:text-accent-500 transition-colors text-sm py-1.5 inline-block"
                >+49 (0) 9943 / 905270</a
              >
              <p class="text-dark-500 text-xs">Festnetz</p>
            </div>
            <div>
              <a
                href="tel:+4915154920918"
                class="text-dark-300 hover:text-accent-500 transition-colors text-sm py-1.5 inline-block"
                >+49 (0) 151 / 549 209 18</a
              >
              <p class="text-dark-500 text-xs">Mobil — Trockenbau</p>
            </div>
            <div>
              <a
                href="tel:+491702924011"
                class="text-dark-300 hover:text-accent-500 transition-colors text-sm py-1.5 inline-block"
                >+49 (0) 170 / 292 40 11</a
              >
              <p class="text-dark-500 text-xs">Mobil — Malerarbeiten</p>
            </div>
          </div>
        </div>

        <!-- Email Card -->
        <div
          class="fade-in p-6 sm:p-8 rounded-2xl bg-dark-800/30 border border-white/[0.03] hover:border-white/[0.06] transition-all duration-700 group"
        >
          <div
            class="w-12 h-12 rounded-xl bg-accent-500/10 flex items-center justify-center mb-5 group-hover:bg-accent-500/20 transition-colors"
          >
            <svg
              class="w-6 h-6 text-accent-500"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"
              ></path>
            </svg>
          </div>
          <h3 class="text-white font-semibold mb-3 font-heading">E-Mail</h3>
          <a
            href="mailto:kreuzer-trockenbau@gmx.de"
            class="text-dark-300 hover:text-accent-500 transition-colors text-sm break-all"
          >
            kreuzer-trockenbau@gmx.de
          </a>
          <p class="text-dark-500 text-xs mt-2">Antwort in der Regel innerhalb von 24 Stunden.</p>
        </div>

        <!-- Address Card -->
        <div
          class="fade-in p-6 sm:p-8 rounded-2xl bg-dark-800/30 border border-white/[0.03] hover:border-white/[0.06] transition-all duration-700 group"
        >
          <div
            class="w-12 h-12 rounded-xl bg-accent-500/10 flex items-center justify-center mb-5 group-hover:bg-accent-500/20 transition-colors"
          >
            <svg
              class="w-6 h-6 text-accent-500"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"></path>
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"></path>
            </svg>
          </div>
          <h3 class="text-white font-semibold mb-3 font-heading">Adresse</h3>
          <p class="text-dark-300 text-sm">
            Tannenweg 2<br />
            93474 Haibühl / Arrach
          </p>
          <p class="text-dark-500 text-xs mt-2">Im Bayerischen Wald, Bayern</p>
        </div>

        <!-- Erreichbarkeit Card -->
        <div
          class="fade-in p-6 sm:p-8 rounded-2xl bg-dark-800/30 border border-white/[0.03] hover:border-white/[0.06] transition-all duration-700 group"
        >
          <div
            class="w-12 h-12 rounded-xl bg-accent-500/10 flex items-center justify-center mb-5 group-hover:bg-accent-500/20 transition-colors"
          >
            <svg
              class="w-6 h-6 text-accent-500"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"
              ></path>
            </svg>
          </div>
          <h3 class="text-white font-semibold mb-3 font-heading">Erreichbarkeit</h3>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-dark-400">Mo — Fr</span>
              <span class="text-dark-200">07:00 — 17:00</span>
            </div>
            <div class="flex justify-between">
              <span class="text-dark-400">Samstag</span>
              <span class="text-dark-200">nach Absprache</span>
            </div>
            <div class="flex justify-between">
              <span class="text-dark-400">Sonntag</span>
              <span class="text-dark-500">geschlossen</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Directions -->
      <div class="fade-in">
        <h2 class="text-2xl font-bold text-white mb-6 font-heading">Anfahrt von Regensburg</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">1</span>
            </div>
            <p class="text-dark-300 text-sm">B16 Richtung Cham / Roding / Nittenau</p>
          </div>
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">2</span>
            </div>
            <p class="text-dark-300 text-sm">B20/B85 über Furth i.W. nach Bad Kötzting</p>
          </div>
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">3</span>
            </div>
            <p class="text-dark-300 text-sm">St2138 Richtung Lam / Arrach</p>
          </div>
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">4</span>
            </div>
            <p class="text-dark-300 text-sm">Links in die Regenhäuser Str., dann Schwarzhölzlstr.</p>
          </div>
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">5</span>
            </div>
            <p class="text-dark-300 text-sm">Nach 500m rechts auf den Tannenweg</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <style is:global>
    /* === Wizard Card Container === */
    .wiz-card {
      position: relative;
    }
    .wiz-border-glow {
      background: linear-gradient(135deg, transparent 30%, var(--color-accent-500) 50%, transparent 70%);
      opacity: 0.15;
      animation: wizBorderRotate 6s linear infinite;
      background-size: 300% 300%;
    }
    @keyframes wizBorderRotate {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    /* === Sparkle icon pulse === */
    .wiz-icon-pulse {
      animation: wizIconPulse 2.5s ease-in-out infinite;
    }
    @keyframes wizIconPulse {
      0%,
      100% {
        box-shadow: 0 0 0 0 rgba(201, 122, 66, 0.2);
      }
      50% {
        box-shadow: 0 0 20px 4px rgba(201, 122, 66, 0.15);
      }
    }

    /* === Option Cards (Step 1) === */
    .wiz-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1.25rem 0.75rem;
      border-radius: 1rem;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.06);
      transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      animation: wizCardIn 0.5s ease-out both;
    }
    .wiz-option:hover {
      border-color: rgba(201, 122, 66, 0.35);
      background: rgba(201, 122, 66, 0.06);
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 8px 24px rgba(201, 122, 66, 0.08);
    }
    .wiz-option.selected {
      border-color: rgba(201, 122, 66, 0.6);
      background: rgba(201, 122, 66, 0.12);
      transform: translateY(-2px) scale(1.03);
      box-shadow: 0 8px 30px rgba(201, 122, 66, 0.15);
    }
    .wiz-option.selected .wiz-option-icon {
      background: rgba(201, 122, 66, 0.2);
      color: var(--color-accent-500);
    }
    .wiz-option.selected .wiz-option-label {
      color: #fff;
    }

    .wiz-option-icon {
      width: 3rem;
      height: 3rem;
      border-radius: 0.75rem;
      background: rgba(255, 255, 255, 0.04);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 0.5rem;
      color: rgba(201, 122, 66, 0.6);
      transition: all 0.3s;
    }
    .wiz-option:hover .wiz-option-icon {
      background: rgba(201, 122, 66, 0.1);
      color: var(--color-accent-500);
    }
    .wiz-option-label {
      font-size: 0.8125rem;
      color: rgba(255, 255, 255, 0.45);
      font-weight: 500;
      transition: color 0.3s;
    }
    .wiz-option:hover .wiz-option-label {
      color: rgba(255, 255, 255, 0.8);
    }

    @keyframes wizCardIn {
      from {
        opacity: 0;
        transform: translateY(12px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* === Chips (Steps 2-3) === */
    .wiz-chip {
      padding: 0.75rem 1rem;
      border-radius: 0.75rem;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.06);
      color: rgba(255, 255, 255, 0.5);
      font-size: 0.8125rem;
      font-weight: 500;
      text-align: center;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }
    .wiz-chip:hover {
      border-color: rgba(201, 122, 66, 0.3);
      color: #fff;
      background: rgba(201, 122, 66, 0.06);
      transform: translateY(-2px);
    }
    .wiz-chip.selected {
      border-color: rgba(201, 122, 66, 0.6);
      background: rgba(201, 122, 66, 0.12);
      color: #fff;
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(201, 122, 66, 0.12);
    }
    .wiz-chip.selected svg {
      opacity: 1;
      color: var(--color-accent-500);
    }
    .wiz-chip-lg {
      padding: 1.25rem 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* === Back / Next Buttons === */
    .wiz-back {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      color: rgba(255, 255, 255, 0.35);
      font-size: 0.875rem;
      transition: all 0.3s;
      cursor: pointer;
      background: none;
      border: none;
      padding: 0.5rem 0;
    }
    .wiz-back:hover {
      color: #fff;
    }

    .wiz-next {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.625rem 1.5rem;
      background: rgba(201, 122, 66, 0.15);
      color: var(--color-accent-500);
      border-radius: 0.75rem;
      font-size: 0.875rem;
      font-weight: 600;
      border: 1px solid rgba(201, 122, 66, 0.2);
      transition: all 0.3s;
      cursor: pointer;
    }
    .wiz-next:hover:not(:disabled) {
      background: rgba(201, 122, 66, 0.25);
      transform: translateX(2px);
    }
    .wiz-next:disabled {
      opacity: 0.25;
      cursor: not-allowed;
    }

    /* === Panel Transitions === */
    .wiz-panel {
      animation: wizPanelIn 0.45s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .wiz-panel.hidden {
      display: none;
    }

    @keyframes wizPanelIn {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    /* === Success Checkmark === */
    .wiz-success-check {
      animation: wizCheckPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) both;
    }
    .wiz-success-check svg {
      animation: wizCheckDraw 0.5s ease-out 0.3s both;
    }
    @keyframes wizCheckPop {
      from {
        transform: scale(0);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }
    @keyframes wizCheckDraw {
      from {
        stroke-dashoffset: 50;
        opacity: 0;
      }
      to {
        stroke-dashoffset: 0;
        opacity: 1;
      }
    }
  </style>

  <script>
    (() => {
      const form = document.getElementById('contact-form') as HTMLFormElement;
      if (!form) return;

      let step = 1;
      const state: Record<string, string> = {};
      const panels = form.querySelectorAll<HTMLElement>('.wiz-panel');
      const progressBar = document.getElementById('wiz-progress') as HTMLElement;
      const stepLabel = document.getElementById('wiz-step-label') as HTMLElement;
      const stepTitle = document.getElementById('wiz-step-title') as HTMLElement;
      const wizWrapper = document.getElementById('wiz-wrapper') as HTMLElement;
      const wizMap = document.getElementById('wiz-map') as HTMLElement;
      let expanded = false;

      const stepTitles: Record<number, string> = {
        1: 'Leistung wählen',
        2: 'Projekt beschreiben',
        3: 'Zeitrahmen festlegen',
        4: 'Kontaktdaten eingeben',
        5: 'Fertig!',
      };

      const wizCard = document.querySelector('.wiz-card') as HTMLElement;
      let mapHeight = 0;

      /* -- Expand wizard: pop out + take map space -- */
      function expandWizard() {
        if (expanded) return;
        expanded = true;

        /* Capture map height before collapsing */
        if (wizMap) mapHeight = wizMap.scrollHeight;

        /* Wizard pops forward */
        if (wizCard) {
          wizCard.style.transition = 'transform 0.6s cubic-bezier(0.4,0,0.2,1), box-shadow 0.6s ease';
          wizCard.style.transform = 'scale(1.03)';
          wizCard.style.boxShadow = '0 20px 60px rgba(201,122,66,0.12), 0 0 80px rgba(201,122,66,0.06)';
        }

        /* Wizard takes full width */
        if (wizWrapper) wizWrapper.classList.add('lg:col-span-2');

        /* Map collapses away */
        if (wizMap) {
          wizMap.style.maxHeight = mapHeight + 'px';
          wizMap.style.overflow = 'hidden';
          requestAnimationFrame(() => {
            wizMap.style.transition =
              'max-height 0.6s cubic-bezier(0.4,0,0.2,1), opacity 0.4s ease, transform 0.4s ease';
            wizMap.style.maxHeight = '0px';
            wizMap.style.opacity = '0';
            wizMap.style.transform = 'scale(0.95)';
            wizMap.style.pointerEvents = 'none';
          });
        }
      }

      /* -- Collapse wizard: shrink back, map returns -- */
      function collapseWizard() {
        if (!expanded) return;
        expanded = false;

        /* Wizard back to normal */
        if (wizCard) {
          wizCard.style.transition = 'transform 0.5s cubic-bezier(0.4,0,0.2,1), box-shadow 0.5s ease';
          wizCard.style.transform = 'scale(1)';
          wizCard.style.boxShadow = 'none';
        }

        /* Back to single column */
        if (wizWrapper) wizWrapper.classList.remove('lg:col-span-2');

        /* Map comes back */
        if (wizMap) {
          wizMap.style.transition =
            'max-height 0.6s cubic-bezier(0.4,0,0.2,1), opacity 0.5s ease 0.1s, transform 0.5s ease 0.1s';
          wizMap.style.maxHeight = mapHeight + 200 + 'px';
          wizMap.style.opacity = '1';
          wizMap.style.transform = 'scale(1)';
          wizMap.style.pointerEvents = '';
          /* Clean up after transition */
          setTimeout(() => {
            if (!expanded && wizMap) {
              wizMap.style.maxHeight = '';
              wizMap.style.overflow = '';
            }
          }, 700);
        }
      }

      /* -- show step -- */
      function showStep(n: number) {
        step = n;
        panels.forEach((p) => {
          const s = Number(p.dataset.wizStep);
          if (s === n) {
            p.classList.remove('hidden');
            p.style.animation = 'none';
            p.offsetHeight;
            p.style.animation = '';
          } else {
            p.classList.add('hidden');
          }
        });

        /* Progress bar */
        const pct = n >= 5 ? 100 : (n / 4) * 100;
        if (progressBar) progressBar.style.width = pct + '%';

        /* Step labels */
        if (stepLabel) stepLabel.textContent = n >= 5 ? 'Abgeschlossen' : `Schritt ${n} von 4`;
        if (stepTitle) stepTitle.textContent = stepTitles[n] || '';

        /* Expand/Collapse logic */
        if (n >= 2 && n <= 4) {
          expandWizard();
        } else if (n === 1 || n === 5) {
          collapseWizard();
        }

        /* Enable/disable Next button on step 2 */
        const nextBtn = form.querySelector('.wiz-panel:not(.hidden) .wiz-next') as HTMLButtonElement;
        if (nextBtn && n === 2) {
          nextBtn.disabled = !(state['projektart'] && state['groesse']);
        }
      }

      /* -- Context-dependent size options -- */
      const sizeDefaults = [
        { value: 'Klein (1-2 Räume)', label: '1–2 Räume' },
        { value: 'Mittel (Wohnung)', label: 'Wohnung' },
        { value: 'Groß (Haus/Gewerbe)', label: 'Haus / Gewerbe' },
      ];
      const sizeBath = [
        { value: '1 Bad', label: '1 Bad' },
        { value: '2 Bäder', label: '2 Bäder' },
        { value: '3+ Bäder / Komplett', label: '3+ Bäder' },
      ];
      const sizeFassade = [
        { value: 'Einfamilienhaus', label: 'Einfamilienhaus' },
        { value: 'Mehrfamilienhaus', label: 'Mehrfamilienhaus' },
        { value: 'Gewerbe / Großprojekt', label: 'Gewerbe' },
      ];

      function updateSizeOptions(leistung: string) {
        const grid = document.getElementById('wiz-groesse-grid');
        const label = document.getElementById('wiz-groesse-label');
        if (!grid || !label) return;

        let options = sizeDefaults;
        if (leistung === 'Bäderrenovierung') {
          options = sizeBath;
          label.textContent = 'Wie viele Bäder?';
        } else if (leistung === 'Fassade') {
          options = sizeFassade;
          label.textContent = 'Um welches Gebäude geht es?';
        } else {
          label.textContent = 'Wie groß ist das Vorhaben?';
        }

        grid.innerHTML = options
          .map(
            (o) =>
              `<button type="button" class="wiz-chip" data-field="groesse" data-value="${o.value}">${o.label}</button>`,
          )
          .join('');

        /* Clear size selection */
        delete state['groesse'];
        (document.getElementById('wiz-groesse') as HTMLInputElement).value = '';
      }

      /* -- Step 1: Service option cards -> auto-advance -- */
      form.querySelectorAll<HTMLElement>('.wiz-option').forEach((btn) => {
        btn.addEventListener('click', () => {
          const field = btn.dataset.field!;
          const value = btn.dataset.value!;
          btn
            .closest('.grid')!
            .querySelectorAll('.wiz-option')
            .forEach((b) => b.classList.remove('selected'));
          btn.classList.add('selected');
          state[field] = value;
          (document.getElementById('wiz-leistung') as HTMLInputElement).value = value;
          updateSizeOptions(value);
          setTimeout(() => showStep(2), 400);
        });
      });

      /* -- Chip clicks via Event Delegation (works for dynamic chips too) -- */
      form.addEventListener('click', (e) => {
        const btn = (e.target as HTMLElement).closest('.wiz-chip') as HTMLElement;
        if (!btn) return;
        const field = btn.dataset.field;
        const value = btn.dataset.value;
        if (!field || !value) return;

        /* Toggle selection within same grid */
        const grid = btn.closest('.grid') || btn.parentElement;
        if (grid) grid.querySelectorAll('.wiz-chip').forEach((b) => b.classList.remove('selected'));
        btn.classList.add('selected');
        state[field] = value;

        if (field === 'projektart') (document.getElementById('wiz-projektart') as HTMLInputElement).value = value;
        if (field === 'groesse') (document.getElementById('wiz-groesse') as HTMLInputElement).value = value;
        if (field === 'zeit') {
          (document.getElementById('wiz-zeit') as HTMLInputElement).value = value;
          setTimeout(() => showStep(4), 400);
          return;
        }
        /* Enable Next on step 2 when both selected */
        if (step === 2) {
          const nextBtn = form.querySelector('.wiz-panel:not(.hidden) .wiz-next') as HTMLButtonElement;
          if (nextBtn) nextBtn.disabled = !(state['projektart'] && state['groesse']);
        }
      });

      /* -- Next / Back -- */
      form.querySelectorAll<HTMLElement>('.wiz-next').forEach((btn) => {
        btn.addEventListener('click', () => showStep(step + 1));
      });
      form.querySelectorAll<HTMLElement>('.wiz-back').forEach((btn) => {
        btn.addEventListener('click', () => showStep(step - 1));
      });

      /* -- Submit -- */
      const status = document.getElementById('form-status');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const submitBtn = document.getElementById('wiz-submit') as HTMLButtonElement;
        const btnText = submitBtn.textContent || 'Anfrage absenden';
        submitBtn.disabled = true;
        submitBtn.textContent = 'Wird gesendet...';
        submitBtn.classList.add('opacity-70', 'cursor-not-allowed');
        if (status) status.classList.add('hidden');

        try {
          const fd = new FormData(form);
          const res = await fetch('https://api.web3forms.com/submit', { method: 'POST', body: fd });
          const data = await res.json();
          if (data.success) {
            showStep(5);
          } else {
            throw new Error(data.message || 'Unbekannter Fehler');
          }
        } catch {
          if (status) {
            status.textContent =
              'Leider ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut oder rufen Sie uns direkt an.';
            status.className = 'text-sm text-red-400 mt-2';
          }
        } finally {
          submitBtn.disabled = false;
          submitBtn.textContent = btnText;
          submitBtn.classList.remove('opacity-70', 'cursor-not-allowed');
        }
      });

      /* Init */
      showStep(1);
    })();
  </script>
</Layout>
