---
import Layout from '../layouts/Layout.astro';
const base = import.meta.env.BASE_URL;
---

<Layout title="Kontakt – Kreuzer Trockenbau & Malerbetrieb" description="Kontaktieren Sie Kreuzer Trockenbau & Malerbetrieb in Haibühl. Telefon, E-Mail und Anfahrt.">

  <!-- Page Header — Graphic / No Photo -->
  <section class="relative min-h-[50vh] sm:min-h-[55vh] flex items-end overflow-hidden bg-dark-950">
    <!-- Animated gradient orbs -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="kontakt-orb absolute w-[500px] h-[500px] rounded-full bg-accent-500/[0.07] blur-[120px] top-[-10%] left-[-5%]"></div>
      <div class="kontakt-orb absolute w-[400px] h-[400px] rounded-full bg-accent-500/[0.04] blur-[100px] bottom-[0%] right-[-5%]" style="animation-delay: -3s;"></div>
      <div class="kontakt-orb absolute w-[300px] h-[300px] rounded-full bg-white/[0.02] blur-[80px] top-[20%] right-[20%]" style="animation-delay: -6s;"></div>
    </div>
    <!-- Subtle grid pattern -->
    <div class="absolute inset-0 opacity-[0.03]" style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 60px 60px;"></div>
    <!-- Bottom fade -->
    <div class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-dark-950 to-transparent"></div>

    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 sm:pb-16 pt-36 w-full text-center">
      <span class="text-accent-500 text-sm font-medium uppercase tracking-widest fade-in">Wir sind für Sie da</span>
      <h1 class="text-4xl sm:text-5xl lg:text-6xl font-light text-white mt-4 mb-5 fade-in font-heading tracking-tight">Sprechen Sie uns an</h1>
      <div class="h-0.5 w-16 bg-accent-500 rounded-full mx-auto mb-6 fade-in"></div>
      <p class="text-dark-400 text-lg max-w-2xl mx-auto fade-in leading-relaxed">
        Rufen Sie uns an, schreiben Sie eine E-Mail oder besuchen Sie uns persönlich — wir freuen uns auf Ihre Anfrage.
      </p>
    </div>
  </section>

  <style>
    @keyframes kontakt-float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(30px, -20px) scale(1.05); }
      66% { transform: translate(-20px, 15px) scale(0.95); }
    }
    .kontakt-orb {
      animation: kontakt-float 12s ease-in-out infinite;
    }
  </style>

  <!-- Contact Info + Form -->
  <section class="py-20 sm:py-32 lg:py-40 bg-dark-950">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

      <!-- Top Row: 3 Info Cards + Erreichbarkeit -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
        <!-- Phone Card -->
        <div class="fade-in p-6 sm:p-8 rounded-2xl bg-dark-800/30 border border-white/[0.03] hover:border-white/[0.06] transition-all duration-700 group">
          <div class="w-12 h-12 rounded-xl bg-accent-500/10 flex items-center justify-center mb-5 group-hover:bg-accent-500/20 transition-colors">
            <svg class="w-6 h-6 text-accent-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
            </svg>
          </div>
          <h3 class="text-white font-semibold mb-3 font-heading">Telefon</h3>
          <div class="space-y-1">
            <div>
              <a href="tel:+4909943905270" class="text-dark-300 hover:text-accent-500 transition-colors text-sm py-1.5 inline-block">+49 (0) 9943 / 905270</a>
              <p class="text-dark-500 text-xs">Festnetz</p>
            </div>
            <div>
              <a href="tel:+4915154920918" class="text-dark-300 hover:text-accent-500 transition-colors text-sm py-1.5 inline-block">+49 (0) 151 / 549 209 18</a>
              <p class="text-dark-500 text-xs">Mobil — Trockenbau</p>
            </div>
            <div>
              <a href="tel:+491702924011" class="text-dark-300 hover:text-accent-500 transition-colors text-sm py-1.5 inline-block">+49 (0) 170 / 292 40 11</a>
              <p class="text-dark-500 text-xs">Mobil — Malerarbeiten</p>
            </div>
          </div>
        </div>

        <!-- Email Card -->
        <div class="fade-in p-6 sm:p-8 rounded-2xl bg-dark-800/30 border border-white/[0.03] hover:border-white/[0.06] transition-all duration-700 group">
          <div class="w-12 h-12 rounded-xl bg-accent-500/10 flex items-center justify-center mb-5 group-hover:bg-accent-500/20 transition-colors">
            <svg class="w-6 h-6 text-accent-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
            </svg>
          </div>
          <h3 class="text-white font-semibold mb-3 font-heading">E-Mail</h3>
          <a href="mailto:kreuzer-trockenbau@gmx.de" class="text-dark-300 hover:text-accent-500 transition-colors text-sm break-all">
            kreuzer-trockenbau@gmx.de
          </a>
          <p class="text-dark-500 text-xs mt-2">Antwort in der Regel innerhalb von 24 Stunden.</p>
        </div>

        <!-- Address Card -->
        <div class="fade-in p-6 sm:p-8 rounded-2xl bg-dark-800/30 border border-white/[0.03] hover:border-white/[0.06] transition-all duration-700 group">
          <div class="w-12 h-12 rounded-xl bg-accent-500/10 flex items-center justify-center mb-5 group-hover:bg-accent-500/20 transition-colors">
            <svg class="w-6 h-6 text-accent-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
            </svg>
          </div>
          <h3 class="text-white font-semibold mb-3 font-heading">Adresse</h3>
          <p class="text-dark-300 text-sm">
            Tannenweg 2<br/>
            93474 Haibühl / Arrach
          </p>
          <p class="text-dark-500 text-xs mt-2">Im Bayerischen Wald, Bayern</p>
        </div>

        <!-- Erreichbarkeit Card -->
        <div class="fade-in p-6 sm:p-8 rounded-2xl bg-dark-800/30 border border-white/[0.03] hover:border-white/[0.06] transition-all duration-700 group">
          <div class="w-12 h-12 rounded-xl bg-accent-500/10 flex items-center justify-center mb-5 group-hover:bg-accent-500/20 transition-colors">
            <svg class="w-6 h-6 text-accent-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="text-white font-semibold mb-3 font-heading">Erreichbarkeit</h3>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-dark-400">Mo — Fr</span>
              <span class="text-dark-200">07:00 — 17:00</span>
            </div>
            <div class="flex justify-between">
              <span class="text-dark-400">Samstag</span>
              <span class="text-dark-200">nach Absprache</span>
            </div>
            <div class="flex justify-between">
              <span class="text-dark-400">Sonntag</span>
              <span class="text-dark-500">geschlossen</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Form + Map Side by Side -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

        <!-- Contact Form -->
        <div class="fade-in-left">
          <h2 class="text-2xl font-bold text-white mb-2 font-heading">Nachricht senden</h2>
          <p class="text-dark-400 text-sm mb-6">Beschreiben Sie kurz Ihr Vorhaben — wir melden uns schnellstmöglich.</p>

          <form id="contact-form" class="space-y-5">
            <!-- Web3Forms -->
            <input type="hidden" name="access_key" value="e3b02111-91ad-440e-80f7-cae1f05299be" />
            <input type="hidden" name="subject" value="Neue Anfrage über kreuzer-trockenbau.de" />
            <input type="hidden" name="from_name" value="Kreuzer Trockenbau Website" />
            <input type="checkbox" name="botcheck" class="hidden" style="display:none" />

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
              <div>
                <label for="name" class="block text-dark-300 text-sm mb-2">Name *</label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-3 rounded-xl bg-dark-800/50 border border-white/10 text-white placeholder-dark-500 text-sm focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/25 transition-colors"
                  placeholder="Ihr Name"
                />
              </div>
              <div>
                <label for="email" class="block text-dark-300 text-sm mb-2">E-Mail *</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 rounded-xl bg-dark-800/50 border border-white/10 text-white placeholder-dark-500 text-sm focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/25 transition-colors"
                  placeholder="ihre@email.de"
                />
              </div>
            </div>
            <div>
              <label for="phone" class="block text-dark-300 text-sm mb-2">Telefon <span class="text-dark-500">(optional)</span></label>
              <input
                type="tel"
                id="phone"
                name="phone"
                class="w-full px-4 py-3 rounded-xl bg-dark-800/50 border border-white/10 text-white placeholder-dark-500 text-sm focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/25 transition-colors"
                placeholder="Ihre Telefonnummer"
              />
            </div>
            <div>
              <label for="message" class="block text-dark-300 text-sm mb-2">Nachricht *</label>
              <textarea
                id="message"
                name="message"
                required
                rows="5"
                class="w-full px-4 py-3 rounded-xl bg-dark-800/50 border border-white/10 text-white placeholder-dark-500 text-sm focus:outline-none focus:border-accent-500/50 focus:ring-1 focus:ring-accent-500/25 transition-colors resize-none"
                placeholder="Beschreiben Sie kurz Ihr Projekt..."
              ></textarea>
            </div>
            <p class="text-dark-500 text-xs leading-relaxed">
              Mit dem Absenden stimmen Sie unserer <a href={`${base}/datenschutz`} class="text-accent-500/70 hover:text-accent-400 transition-colors underline">Datenschutzerklärung</a> zu.
            </p>
            <button
              type="submit"
              class="w-full sm:w-auto px-8 py-3.5 bg-accent-500 hover:bg-accent-400 text-dark-950 rounded-xl font-semibold transition-all duration-300 hover:shadow-lg hover:shadow-accent-500/25 hover:-translate-y-0.5 text-sm"
            >
              Nachricht absenden
            </button>
            <p id="form-status" class="text-sm hidden"></p>
          </form>
        </div>

        <!-- Google Maps Embed -->
        <div class="fade-in-right">
          <h2 class="text-2xl font-bold text-white mb-2 font-heading">Standort</h2>
          <p class="text-dark-400 text-sm mb-6">Haibühl, Gemeinde Arrach im Bayerischen Wald.</p>

          <div class="rounded-2xl overflow-hidden border border-white/5 h-[300px] sm:h-[350px] lg:aspect-auto lg:h-full lg:min-h-[400px] relative">
            <iframe
              src="https://www.openstreetmap.org/export/embed.html?bbox=12.98%2C49.18%2C13.02%2C49.20&layer=mapnik&marker=49.19%2C13.00"
              width="100%"
              height="100%"
              style="border:0;"
              loading="lazy"
              title="Standort Kreuzer Trockenbau in Haibühl / Arrach"
            ></iframe>
            <div class="absolute bottom-3 right-3">
              <a
                href="https://www.google.de/maps/place/Tannenweg+2,+93474+Arrach"
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-dark-950/80 backdrop-blur-sm text-white/80 hover:text-accent-500 rounded-lg text-xs font-medium transition-colors border border-white/10"
              >
                <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
                </svg>
                Google Maps
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Directions -->
      <div class="mt-16 fade-in">
        <h2 class="text-2xl font-bold text-white mb-6 font-heading">Anfahrt von Regensburg</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">1</span>
            </div>
            <p class="text-dark-300 text-sm">B16 Richtung Cham / Roding / Nittenau</p>
          </div>
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">2</span>
            </div>
            <p class="text-dark-300 text-sm">B20/B85 über Furth i.W. nach Bad Kötzting</p>
          </div>
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">3</span>
            </div>
            <p class="text-dark-300 text-sm">St2138 Richtung Lam / Arrach</p>
          </div>
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">4</span>
            </div>
            <p class="text-dark-300 text-sm">Links in die Regenhäuser Str., dann Schwarzhölzlstr.</p>
          </div>
          <div class="flex items-start gap-3 p-4 rounded-xl bg-dark-800/30 border border-white/5">
            <div class="w-8 h-8 rounded-lg bg-accent-500/10 flex items-center justify-center shrink-0">
              <span class="text-accent-500 text-sm font-bold">5</span>
            </div>
            <p class="text-dark-300 text-sm">Nach 500m rechts auf den Tannenweg</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const status = document.getElementById('form-status');
    const submitBtn = form?.querySelector('button[type="submit"]') as HTMLButtonElement;
    const btnText = submitBtn?.textContent || 'Nachricht absenden';

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Loading State
      submitBtn.disabled = true;
      submitBtn.textContent = 'Wird gesendet...';
      submitBtn.classList.add('opacity-70', 'cursor-not-allowed');

      if (status) {
        status.classList.add('hidden');
      }

      try {
        const formData = new FormData(form);
        const res = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          body: formData,
        });

        const data = await res.json();

        if (data.success) {
          // Erfolg
          if (status) {
            status.textContent = 'Vielen Dank! Ihre Nachricht wurde erfolgreich gesendet. Wir melden uns schnellstmöglich bei Ihnen.';
            status.className = 'text-sm text-green-400 mt-2';
          }
          form.reset();
        } else {
          throw new Error(data.message || 'Unbekannter Fehler');
        }
      } catch (err) {
        // Fehler
        if (status) {
          status.textContent = 'Leider ist ein Fehler aufgetreten. Bitte versuchen Sie es erneut oder rufen Sie uns direkt an.';
          status.className = 'text-sm text-red-400 mt-2';
        }
      } finally {
        // Button zurücksetzen
        submitBtn.disabled = false;
        submitBtn.textContent = btnText;
        submitBtn.classList.remove('opacity-70', 'cursor-not-allowed');
      }
    });
  </script>

</Layout>
