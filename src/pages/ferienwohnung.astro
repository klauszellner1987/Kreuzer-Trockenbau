---
import LayoutFewo from '../layouts/LayoutFewo.astro';
import { amenities, prices, guestReviews, galleryImages, faqItems } from '../data/ferienwohnung';
const base = import.meta.env.BASE_URL;
---

<LayoutFewo title="Ferienwohnung Arrach | Haibühler Spitz – Bayerischer Wald, Lamer Winkel">
  <!-- Hero -->
  <section class="relative min-h-[70vh] sm:min-h-[80vh] flex items-end overflow-hidden">
    <div class="absolute inset-0">
      <img
        src={`${base}/images/fewo/hero.jpg`}
        alt="Haibühler Spitz Ferienwohnung"
        class="w-full h-full object-cover"
        loading="eager"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-[#3A2E25] via-[#3A2E25]/40 to-transparent"></div>
    </div>
    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16 sm:pb-24 pt-36 w-full">
      <span class="text-[#D99260] text-sm font-medium uppercase tracking-[0.25em] fade-in font-heading">Ferienwohnung</span>
      <h1 class="text-5xl sm:text-6xl lg:text-7xl font-light text-white mt-4 mb-6 fade-in font-heading tracking-tight">
        Haibühler Spitz
      </h1>
      <p class="text-white/80 text-lg sm:text-xl max-w-xl fade-in leading-relaxed">
        Urlaub im Lamer Winkel — Ihre Ferienwohnung mit Bergblick in Haibühl, Gemeinde Arrach.
      </p>
      <div class="flex flex-wrap gap-4 mt-8 fade-in">
        <a
          href="#anfrage"
          class="inline-flex items-center gap-2 px-6 py-3 bg-[#C97A42] hover:bg-[#B06835] text-white rounded-xl font-heading font-medium text-sm tracking-wide transition-all duration-300 hover:shadow-lg hover:shadow-[#C97A42]/25"
        >
          Jetzt anfragen
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
          </svg>
        </a>
        <a
          href="#galerie"
          class="inline-flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/20 text-white border border-white/20 rounded-xl font-heading font-medium text-sm tracking-wide transition-all duration-300 backdrop-blur-sm"
        >
          Bilder ansehen
        </a>
      </div>
    </div>
  </section>

  <!-- Beschreibung -->
  <section class="py-20 sm:py-28" style="background-color: var(--fewo-bg);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-start">
        <div class="fade-in-left">
          <span class="font-heading text-sm font-medium uppercase tracking-[0.2em]" style="color: var(--fewo-accent);">Über die Wohnung</span>
          <h2 class="text-3xl sm:text-4xl font-light mt-4 mb-6 font-heading tracking-tight" style="color: var(--fewo-text);">
            Vom Rathaus zum Traumdomizil
          </h2>
          <div class="h-1 w-16 rounded-full mb-8" style="background-color: var(--fewo-accent);"></div>
          <div class="space-y-4 leading-relaxed" style="color: var(--fewo-text-muted);">
            <p>
              Das ehemalige Gemeinderathaus von Haibühl wurde von der Firma Kreuzer Trockenbau komplett saniert und in
              moderne Wohnungen umgebaut — mit dem gleichen Qualitätsanspruch, den wir auch bei all unseren anderen Projekten haben.
            </p>
            <p>
              Die Ferienwohnung „Haibühler Spitz" befindet sich im obersten Stockwerk und bietet einen wunderschönen Blick
              über Haibühl und den Bayerischen Wald. Auf ca. 65 m² finden bis zu 4 Gäste alles, was sie für einen
              erholsamen Urlaub brauchen.
            </p>
            <p>
              Die zentrale Lage in Haibühl, Gemeinde Arrach, ist der ideale Ausgangspunkt für Wanderungen, Radtouren
              und Ausflüge in die Region — egal ob Sommer oder Winter.
            </p>
          </div>
        </div>

        <!-- Ausstattung -->
        <div class="fade-in-right">
          <h3 class="text-xl font-heading font-medium mb-6" style="color: var(--fewo-text);">Ausstattung</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            {amenities.map((amenity) => (
              <div
                class="flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300"
                style="background-color: var(--fewo-bg-card); border: 1px solid var(--fewo-border);"
              >
                <div class="w-10 h-10 rounded-lg flex items-center justify-center shrink-0" style="background-color: rgba(201, 122, 66, 0.1);">
                  <svg class="w-5 h-5" style="color: var(--fewo-accent);" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <Fragment set:html={amenity.icon} />
                  </svg>
                </div>
                <span class="text-sm font-medium" style="color: var(--fewo-text);">{amenity.label}</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Bildergalerie -->
  <section id="galerie" class="py-20 sm:py-28" style="background-color: var(--fewo-bg-alt);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="mb-12 fade-in">
        <span class="font-heading text-sm font-medium uppercase tracking-[0.2em]" style="color: var(--fewo-accent);">Impressionen</span>
        <h2 class="text-3xl sm:text-4xl font-light mt-4 mb-5 font-heading tracking-tight" style="color: var(--fewo-text);">Bildergalerie</h2>
        <div class="h-0.5 w-16 rounded-full" style="background-color: var(--fewo-accent);"></div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 stagger-children">
        {galleryImages.map((img, i) => (
          <div class:list={[
            'rounded-2xl overflow-hidden group cursor-pointer relative',
            i === 0 ? 'sm:col-span-2 sm:row-span-2' : '',
          ]}>
            <div class:list={[
              'overflow-hidden',
              i === 0 ? 'aspect-[4/3] sm:aspect-auto sm:h-full' : 'aspect-[4/3]',
            ]}>
              <img
                src={`${base}${img.src}`}
                alt={img.alt}
                class="w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-[1.03]"
                loading="lazy"
                style="border: 1px solid var(--fewo-border); border-radius: 1rem;"
              />
            </div>
            <div class="absolute inset-0 bg-gradient-to-t from-[#3A2E25]/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"></div>
            <div class="absolute bottom-4 left-4 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
              <p class="text-white text-sm font-medium">{img.alt}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Preise -->
  <section class="py-20 sm:py-28" style="background-color: var(--fewo-bg);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-2xl mx-auto">
        <div class="text-center mb-12 fade-in">
          <span class="font-heading text-sm font-medium uppercase tracking-[0.2em]" style="color: var(--fewo-accent);">Preise</span>
          <h2 class="text-3xl sm:text-4xl font-light mt-4 mb-5 font-heading tracking-tight" style="color: var(--fewo-text);">
            Unsere Preise
          </h2>
          <div class="h-0.5 w-16 rounded-full mx-auto" style="background-color: var(--fewo-accent);"></div>
        </div>

        <div class="rounded-2xl overflow-hidden fade-in" style="background-color: var(--fewo-bg-card); border: 1px solid var(--fewo-border);">
          {prices.map((row, i) => (
            <div
              class:list={[
                'flex items-center justify-between px-6 py-5',
                i < prices.length - 1 ? 'border-b' : '',
              ]}
              style={i < prices.length - 1 ? 'border-color: var(--fewo-border);' : ''}
            >
              <div>
                <p class="font-medium text-sm sm:text-base" style="color: var(--fewo-text);">{row.label}</p>
                {row.note && <p class="text-xs mt-0.5" style="color: var(--fewo-text-light);">{row.note}</p>}
              </div>
              <span class="font-heading font-semibold text-lg shrink-0 ml-4" style="color: var(--fewo-accent);">{row.price}</span>
            </div>
          ))}
        </div>

        <p class="text-center text-sm mt-6" style="color: var(--fewo-text-light);">
          Alle Preise inkl. Bettwäsche, Handtücher und Nebenkosten. Preise sind Richtwerte — genaues Angebot auf Anfrage.
        </p>
      </div>
    </div>
  </section>

  <!-- Gästebewertungen -->
  <section class="py-20 sm:py-28" style="background-color: var(--fewo-bg-alt);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="mb-12 fade-in">
        <span class="font-heading text-sm font-medium uppercase tracking-[0.2em]" style="color: var(--fewo-accent);">Bewertungen</span>
        <h2 class="text-3xl sm:text-4xl font-light mt-4 mb-5 font-heading tracking-tight" style="color: var(--fewo-text);">
          Das sagen unsere Gäste
        </h2>
        <div class="h-0.5 w-16 rounded-full" style="background-color: var(--fewo-accent);"></div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 stagger-children">
        {guestReviews.map((review) => (
          <div
            class="p-6 sm:p-8 rounded-2xl transition-all duration-500"
            style="background-color: var(--fewo-bg-card); border: 1px solid var(--fewo-border);"
          >
            {/* Stars */}
            <div class="flex items-center gap-1 mb-4">
              {Array.from({ length: review.rating }).map(() => (
                <svg class="w-4 h-4" style="color: var(--fewo-accent);" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                </svg>
              ))}
            </div>

            <p class="text-sm leading-relaxed mb-5 italic" style="color: var(--fewo-text-muted);">
              &ldquo;{review.text}&rdquo;
            </p>

            <div class="flex items-center gap-3 pt-4" style="border-top: 1px solid var(--fewo-border);">
              <div class="w-9 h-9 rounded-full flex items-center justify-center" style="background-color: rgba(201, 122, 66, 0.12);">
                <span class="font-semibold text-xs" style="color: var(--fewo-accent);">{review.name.charAt(0)}</span>
              </div>
              <div>
                <p class="font-medium text-sm" style="color: var(--fewo-text);">{review.name}</p>
                <p class="text-xs" style="color: var(--fewo-text-light);">{review.date}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section class="py-20 sm:py-28" style="background-color: var(--fewo-bg);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto">
        <div class="text-center mb-12 fade-in">
          <span class="font-heading text-sm font-medium uppercase tracking-[0.2em]" style="color: var(--fewo-accent);">Häufige Fragen</span>
          <h2 class="text-3xl sm:text-4xl font-light mt-4 mb-5 font-heading tracking-tight" style="color: var(--fewo-text);">
            Gut zu wissen
          </h2>
          <div class="h-0.5 w-16 rounded-full mx-auto" style="background-color: var(--fewo-accent);"></div>
        </div>

        <div class="space-y-3 stagger-children">
          {faqItems.map((faq, i) => (
            <details
              class="faq-item group rounded-xl overflow-hidden transition-all duration-300"
              style="background-color: var(--fewo-bg-card); border: 1px solid var(--fewo-border);"
            >
              <summary
                class="flex items-center justify-between px-6 py-4 cursor-pointer select-none list-none [-webkit-appearance:none]"
                style="color: var(--fewo-text);"
              >
                <span class="font-medium text-sm sm:text-base pr-4">{faq.question}</span>
                <svg
                  class="w-5 h-5 shrink-0 transition-transform duration-300 group-open:rotate-45"
                  style="color: var(--fewo-accent);"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                </svg>
              </summary>
              <div class="px-6 pb-5">
                <p class="text-sm leading-relaxed" style="color: var(--fewo-text-muted);">
                  {faq.answer}
                </p>
              </div>
            </details>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Buchungsanfrage -->
  <section id="anfrage" class="py-20 sm:py-28" style="background-color: var(--fewo-bg-alt);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-2xl mx-auto">
        <div class="text-center mb-12 fade-in">
          <span class="font-heading text-sm font-medium uppercase tracking-[0.2em]" style="color: var(--fewo-accent);">Buchung</span>
          <h2 class="text-3xl sm:text-4xl font-light mt-4 mb-5 font-heading tracking-tight" style="color: var(--fewo-text);">
            Anfrage senden
          </h2>
          <div class="h-0.5 w-16 rounded-full mx-auto" style="background-color: var(--fewo-accent);"></div>
          <p class="mt-6 leading-relaxed" style="color: var(--fewo-text-muted);">
            Interessiert? Senden Sie uns eine unverbindliche Anfrage und wir melden uns schnellstmöglich bei Ihnen.
          </p>
        </div>

        <form id="booking-form" class="space-y-5 fade-in">
          <!-- Web3Forms -->
          <input type="hidden" name="access_key" value="e3b02111-91ad-440e-80f7-cae1f05299be" />
          <input type="hidden" name="subject" value="Buchungsanfrage Haibühler Spitz" />
          <input type="hidden" name="from_name" value="Haibühler Spitz Website" />
          <input type="checkbox" name="botcheck" class="hidden" style="display:none" />

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label for="name" class="block text-xs mb-1.5 font-medium" style="color: var(--fewo-text-muted);">Name *</label>
              <input
                type="text"
                id="name"
                name="name"
                required
                class="fewo-input w-full px-4 py-3 rounded-xl text-sm transition-all duration-300 outline-none"
                placeholder="Ihr Name"
              />
            </div>
            <div>
              <label for="email" class="block text-xs mb-1.5 font-medium" style="color: var(--fewo-text-muted);">E-Mail *</label>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="fewo-input w-full px-4 py-3 rounded-xl text-sm transition-all duration-300 outline-none"
                placeholder="Ihre E-Mail"
              />
            </div>
          </div>

          <div>
            <label for="phone" class="block text-xs mb-1.5 font-medium" style="color: var(--fewo-text-muted);">Telefon</label>
            <input
              type="tel"
              id="phone"
              name="phone"
              class="fewo-input w-full px-4 py-3 rounded-xl text-sm transition-all duration-300 outline-none"
              placeholder="Ihre Telefonnummer (optional)"
            />
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
            <div>
              <label for="checkin" class="block text-xs mb-1.5 font-medium" style="color: var(--fewo-text-muted);">Anreise *</label>
              <input
                type="date"
                id="checkin"
                name="checkin"
                required
                class="fewo-input w-full px-4 py-3 rounded-xl text-sm transition-all duration-300 outline-none"
              />
            </div>
            <div>
              <label for="checkout" class="block text-xs mb-1.5 font-medium" style="color: var(--fewo-text-muted);">Abreise *</label>
              <input
                type="date"
                id="checkout"
                name="checkout"
                required
                class="fewo-input w-full px-4 py-3 rounded-xl text-sm transition-all duration-300 outline-none"
              />
            </div>
            <div>
              <label for="guests" class="block text-xs mb-1.5 font-medium" style="color: var(--fewo-text-muted);">Gäste *</label>
              <select
                id="guests"
                name="guests"
                required
                class="fewo-input w-full px-4 py-3 rounded-xl text-sm transition-all duration-300 outline-none"
              >
                <option value="">Wählen</option>
                <option value="1">1 Person</option>
                <option value="2">2 Personen</option>
                <option value="3">3 Personen</option>
                <option value="4">4 Personen</option>
              </select>
            </div>
          </div>

          <div>
            <label for="message" class="block text-xs mb-1.5 font-medium" style="color: var(--fewo-text-muted);">Nachricht</label>
            <textarea
              id="message"
              name="message"
              rows="4"
              class="fewo-input w-full px-4 py-3 rounded-xl text-sm transition-all duration-300 outline-none resize-none"
              placeholder="Besondere Wünsche oder Fragen..."
            ></textarea>
          </div>

          <button
            type="submit"
            id="booking-submit"
            class="w-full py-3.5 rounded-xl font-heading font-medium text-sm tracking-wide text-white transition-all duration-300 hover:shadow-lg"
            style="background-color: var(--fewo-accent);"
          >
            Anfrage absenden
          </button>
        </form>

        <!-- Success message -->
        <div id="booking-success" class="hidden text-center py-12">
          <div class="w-16 h-16 rounded-full mx-auto flex items-center justify-center mb-4" style="background-color: rgba(34, 197, 94, 0.1);">
            <svg class="w-8 h-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <h3 class="text-xl font-heading font-medium mb-2" style="color: var(--fewo-text);">Anfrage gesendet!</h3>
          <p style="color: var(--fewo-text-muted);">Vielen Dank für Ihre Anfrage. Wir melden uns in Kürze bei Ihnen.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Lage & Anfahrt -->
  <section class="py-20 sm:py-28" style="background-color: var(--fewo-bg-alt);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="mb-12 fade-in">
        <span class="font-heading text-sm font-medium uppercase tracking-[0.2em]" style="color: var(--fewo-accent);">Standort</span>
        <h2 class="text-3xl sm:text-4xl font-light mt-4 mb-5 font-heading tracking-tight" style="color: var(--fewo-text);">
          Lage & Anfahrt
        </h2>
        <div class="h-0.5 w-16 rounded-full" style="background-color: var(--fewo-accent);"></div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
        <div class="fade-in-left">
          <div class="rounded-2xl overflow-hidden h-[350px] lg:h-[400px]" style="border: 1px solid var(--fewo-border);">
            <iframe
              src="https://maps.google.com/maps?q=Tannenweg+2,+93474+Arrach&t=k&z=17&hl=de&output=embed"
              width="100%"
              height="100%"
              style="border:0;"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              title="Standort Haibühler Spitz"></iframe>
          </div>
        </div>

        <div class="fade-in-right space-y-6">
          <div class="flex items-start gap-4">
            <div class="w-10 h-10 rounded-lg flex items-center justify-center shrink-0" style="background-color: rgba(201, 122, 66, 0.1);">
              <svg class="w-5 h-5" style="color: var(--fewo-accent);" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
              </svg>
            </div>
            <div>
              <h4 class="font-heading font-medium" style="color: var(--fewo-text);">Adresse</h4>
              <p class="text-sm mt-1" style="color: var(--fewo-text-muted);">
                Haibühler Spitz<br />
                Tannenweg 2<br />
                93474 Arrach / Haibühl
              </p>
            </div>
          </div>

          <div class="flex items-start gap-4">
            <div class="w-10 h-10 rounded-lg flex items-center justify-center shrink-0" style="background-color: rgba(201, 122, 66, 0.1);">
              <svg class="w-5 h-5" style="color: var(--fewo-accent);" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z" />
              </svg>
            </div>
            <div>
              <h4 class="font-heading font-medium" style="color: var(--fewo-text);">Umgebung</h4>
              <ul class="text-sm mt-1 space-y-1" style="color: var(--fewo-text-muted);">
                <li>Eck/Arrach Skigebiet — 5 min</li>
                <li>Lamer Winkel Wandergebiet — 10 min</li>
                <li>Großer Arber — 30 min</li>
                <li>Bad Kötzting Therme — 15 min</li>
              </ul>
            </div>
          </div>

          <div class="flex items-start gap-4">
            <div class="w-10 h-10 rounded-lg flex items-center justify-center shrink-0" style="background-color: rgba(201, 122, 66, 0.1);">
              <svg class="w-5 h-5" style="color: var(--fewo-accent);" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.122-.504 1.125-1.125V11.25a2.999 2.999 0 00-2.974-3H5.625A2.999 2.999 0 002.25 11.25v6.375c.003.621.504 1.125 1.125 1.125H5.25" />
              </svg>
            </div>
            <div>
              <h4 class="font-heading font-medium" style="color: var(--fewo-text);">Anfahrt</h4>
              <p class="text-sm mt-1" style="color: var(--fewo-text-muted);">
                Kostenloser Parkplatz direkt am Haus. Von der A3/B85 ca. 10 Minuten Fahrt nach Haibühl.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Form Script -->
  <script>
    const form = document.getElementById('booking-form') as HTMLFormElement;
    const success = document.getElementById('booking-success');
    const submitBtn = document.getElementById('booking-submit');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!submitBtn) return;

      submitBtn.textContent = 'Wird gesendet...';
      submitBtn.setAttribute('disabled', 'true');

      try {
        const fd = new FormData(form);
        const res = await fetch('https://api.web3forms.com/submit', { method: 'POST', body: fd });
        const data = await res.json();

        if (data.success) {
          form.style.display = 'none';
          success?.classList.remove('hidden');
        } else {
          submitBtn.textContent = 'Fehler — bitte erneut versuchen';
          submitBtn.removeAttribute('disabled');
        }
      } catch {
        submitBtn.textContent = 'Fehler — bitte erneut versuchen';
        submitBtn.removeAttribute('disabled');
      }
    });
  </script>

  <style>
    .fewo-input {
      background-color: var(--fewo-bg-card);
      border: 1px solid var(--fewo-border);
      color: var(--fewo-text);
    }

    .fewo-input::placeholder {
      color: var(--fewo-text-light);
    }

    .fewo-input:focus {
      border-color: var(--fewo-accent);
      box-shadow: 0 0 0 3px rgba(201, 122, 66, 0.1);
    }

    /* Date/select styling */
    .fewo-input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(0.4);
    }

    select.fewo-input {
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%237A6B5D' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 1rem center;
      padding-right: 2.5rem;
    }
  </style>
</LayoutFewo>
